import{u as w,r as f,w as E,b as c,c as r,d as e,F as m,g as h,y as j,v as T,n as A,h as L,l as q,t as p}from"./index-a569ccc7.js";const $={class:"bg-slate-100 w-4/5 h-[70%] rounded-md p-5 text-black"},B=e("h1",{class:"text-center text-xl font-black"}," ㅤ식사 메뉴 추가ㅤ ",-1),I={class:"overflow-y-scroll h-5/6",style:{"overflow-y":"auto"}},N={class:"mb-4 mt-5 border-t-2 border-solid"},O=e("h1",{class:"font-black text-center"}," 시간 ",-1),R={id:"timeSet",class:"flex justify-around mt-2"},V={class:"mb-4 border-t-2 border-solid"},z=e("h1",{class:"font-black text-center"}," 메뉴 ",-1),K={id:"menuList",class:"flex mt-2"},P=["id"],U=["onClick"],G={class:"flex justify-center mt-2"},J={class:"mb-4 border-t-2 border-solid"},H=e("h1",{class:"font-black text-center"}," 사진 ",-1),Q={class:"flex justify-around my-2"},W=e("img",{id:"pic",style:{width:"100%"},alt:"메뉴 사진"},null,-1),X={class:"border-solid border-4 border-[#95DD95] rounded-2xl flex justify-between p-4 mb-2 text-black"},Y={class:"flex items-center"},Z=e("div",{class:"rounded-full w-2 h-2 bg-[#95DD95]"},null,-1),ee={class:"text-base font-black ml-2"},te={class:"flex mt-3 pl-2"},le={class:"p-1 px-2 mr-2 font-normal text-xs text-[#828282] bg-[#F2F2F2] rounded-md"},se={class:"flex justify-end"},oe=["onClick"],ne=["src","alt"],ae=e("span",{class:"text-[#95DD95] text-2xl font-black"}," 추가 ",-1),de=[ae],ue={__name:"Meal",setup(ce){const a=w();a.currentPage=2;const i=f(!1),g=f({time_of_day:0,meal_name:[],photo_url:"0",date:"",user_id:1}),n=f({time_of_day:0,meal_name:[],photo_url:"0",date:"",user_id:1}),x=["아침","점심","저녁","기타"],_=()=>{i.value=!i.value},k=s=>{document.querySelector("#pic").setAttribute("src",URL.createObjectURL(s.target.files[0]))},u=s=>{const l=s;n.value.time_of_day=l,document.querySelectorAll("#timeSet button").forEach((o,d)=>{o.classList.remove("select-bg"),d===l&&o.classList.add("select-bg")})},v=()=>{const s=document.querySelector("#currentMenuRef");s.value.trim()!==""?(n.value.meal_name.push(s.value),s.value=""):alert("메뉴를 입력하세요."),console.log(n.value.meal_name)},C=s=>{const l=s,t=n.value.meal_name.indexOf(l);t!==-1&&n.value.meal_name.splice(t,1)},D=()=>{const s=document.querySelector("#pic");n.value.photo_url=s.src,s.src=null;const l=document.querySelector("#camera");l.value=null;const t=n.value;n.value.date=a.selectDate;const o=n.value.meal_name,d=String(o);n.value.meal_name=d,fetch("http://210.91.210.243:8509/log/meal/detail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),console.log(g.value),n.value.meal_name=[],document.querySelectorAll("#timeSet button").forEach((M,re)=>{M.classList.remove("select-bg")}),_(),setTimeout(()=>{b(1)},100)},b=s=>{const l=a.selectDate;let t="http://210.91.210.243:8509/log/meal?user_id="+s+"&date="+l;console.log(t),fetch(t,{method:"GET"}).then(o=>o.json()).then(o=>{console.log(o),o.forEach((d,S)=>{d.meal_name=d.meal_name.split(",").map(y=>y.trim())}),a.mealData=[],a.mealData.push(o),console.log(a.mealData[0])})},F=s=>{let t="http://210.91.210.243:8509/log/meal/detail?meal_detail_id="+s;confirm("삭제하시겠습니까?")&&(fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}}),setTimeout(()=>{b(1)},100))};return E(()=>{a.selectDate!=""&&b(1)}),(s,l)=>(c(),r(m,null,[e("div",{id:"mealModal",class:T(["modal-overlay",{"modal-on":i.value}]),style:A({visibility:i.value?"visible":"hidden"})},[e("div",$,[e("div",{class:"flex justify-end"},[e("button",{onClick:_,class:"text-3xl font-black"},"×")]),B,e("div",I,[e("div",N,[O,e("div",R,[e("button",{class:"px-3 py-0.5 font-bold text-s bg-[#B8EAFF] rounded-md",onClick:l[0]||(l[0]=t=>u(0))}," 아침 "),e("button",{class:"px-3 py-0.5 font-bold text-s bg-[#FFC67B] rounded-md",onClick:l[1]||(l[1]=t=>u(1))}," 점심 "),e("button",{class:"px-3 py-0.5 font-bold text-s bg-[#FFA09A] rounded-md",onClick:l[2]||(l[2]=t=>u(2))}," 저녁 "),e("button",{class:"px-3 py-0.5 font-bold text-s bg-[#F6FF66] rounded-md",onClick:l[3]||(l[3]=t=>u(3))}," 기타 ")])]),e("div",V,[z,e("div",K,[(c(!0),r(m,null,h(n.value.meal_name,(t,o)=>(c(),r("span",{key:o,id:"menu"+o,class:"p-1 px-2 mr-2 font-bold text-xs bg-[#F2F2F2] rounded-md"},[q(p(t)+" ",1),e("button",{onClick:d=>C(t),class:"font-black text-xs"},"×",8,U)],8,P))),128))]),e("div",G,[e("input",{id:"currentMenuRef",type:"text",onKeyup:j(v,["enter"]),class:"border-solid border-2 border-black rounded-md font-bold w-4/12 text-center"},null,32),e("button",{class:"px-2 font-bold text-s bg-[#95DD95] rounded ml-3",onClick:v},"추가")])]),e("div",J,[H,e("div",Q,[e("input",{type:"file",id:"camera",name:"camera",capture:"camera",accept:"image/*",onChange:k},null,32)]),W]),e("div",{class:"text-right"},[e("button",{class:"mr-2 px-4 py-0.5 font-bold text-s rounded-md border-2 border-black text-black bg-white",onClick:D}," 저장 ")])])])],6),(c(!0),r(m,null,h(L(a).mealData[0],t=>(c(),r("div",X,[e("div",null,[e("div",Y,[Z,e("span",ee,p(x[t.time_of_day]),1)]),e("div",te,[(c(!0),r(m,null,h(t.meal_name,o=>(c(),r("div",le,p(o),1))),256))])]),e("div",null,[e("div",se,[e("button",{onClick:o=>F(t.meal_detail_id),class:"text-md font-black h-4"},"×",8,oe)]),e("img",{class:"w-[4rem] h-[4rem] border-solid border-2 border-[#828282] rounded-full",src:t.photo_url,alt:x[t.time_of_day]},null,8,ne)])]))),256)),e("button",{onClick:_,class:"border-dashed hover:border-solid border-4 border-[#95DD95] rounded-2xl p-4 mb-2 h-[104px] w-[100%] items-center justify-items-center"},de)],64))}};export{ue as default};
