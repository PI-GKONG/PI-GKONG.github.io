import{u as E,r as d,w as F,b as r,c,d as e,t as b,h,F as _,g as y,v as C,n as j,m as v,s as T,x as S}from"./index-a569ccc7.js";const U={class:"bg-slate-100 w-4/5 h-[70%] rounded-md p-5 text-black"},O=e("h1",{class:"text-center text-xl font-black"}," 데이터 추가 ",-1),B={class:"overflow-y-scroll h-5/6",style:{"overflow-y":"auto"}},M={class:"mb-4 mt-5 border-t-2 border-solid"},V={class:"font-black text-center"},N={class:"flex justify-center mt-2 items-center font-black"},P={class:"flex items-center font-black w-[40%] justify-between"},z=e("span",null," : ",-1),L={class:"w-[60%]"},A=["onUpdate:modelValue"],G={key:0,class:"flex justify-end"},J={class:"font-black"},$={class:"ml-auto mr-2 border-solid border-2 rounded-md px-3 text-center",style:{"min-width":"55px"}},q={class:"w-[40%] h-[40px] flex items-center"},Q={__name:"Urine",setup(H){const s=E();s.currentPage=4;const f=d(!1),i={bil:d(),glu:d(),ket:d(),no2:d(),ph:d(),prot:d(),rbc:d(),sg:d(),uro:d(),wbc:d()},p=[{id:"0",label:"정상",textColor:"text-[#00CD82]",bgColor:"bg-[#00CD82]",rounded:"rounded-l-xl"},{id:"1",label:"주의",textColor:"text-[#FFE91E]",bgColor:"bg-[#FFE91E]",rounded:""},{id:"2",label:"경고",textColor:"text-[#FFC54E]",bgColor:"bg-[#FFC54E]",rounded:""},{id:"3",label:"위험",textColor:"text-[#EE474D]",bgColor:"bg-[#EE474D]",rounded:"rounded-r-xl"}],m=()=>{f.value=!f.value},k=(o,a)=>{let t=["w-1/4","h-1/5","bg-slate-300",o.rounded];return o.id==a&&(t=t.filter(n=>n!=="bg-slate-300"),t.push(o.bgColor),t.push(o.textColor)),t},D=()=>{let o,a=s.selectDate,t=1;o={...i},o.date=a,o.user_id=t,console.log(o),fetch("http://210.91.210.243:8509/log/urine",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});for(let l in i)Object.prototype.hasOwnProperty.call(i,l)&&(i[l]="");m(),setTimeout(()=>{g(1)},100)},g=o=>{let a=s.selectDate;console.log(a);let t="http://210.91.210.243:8509/log/urine?user_id="+o+"&date="+a;console.log(t),fetch(t,{method:"GET"}).then(n=>n.json()).then(n=>{console.log(n),n?Object.entries(n).forEach(([l,x])=>{s.urineData.forEach((u,I)=>{l=="urine_id"&&(u.id=x),l==u.name&&(u.data=x),l==u.name+"_class"&&(u.class=x)})}):s.urineData.forEach((l,x)=>{console.log(l),l.data="",l.class="",l.id=""}),console.log(s.urineData)})},w=()=>{const o=s.urineData[0].id;console.log(o);let a="http://210.91.210.243:8509/log/urine?urine_id="+o;confirm("삭제하시겠습니까?")&&(fetch(a,{method:"DELETE",headers:{"Content-Type":"application/json"}}),setTimeout(()=>{g(1)},100))};return F(()=>{s.selectDate!=""&&g(1)}),(o,a)=>(r(),c(_,null,[e("div",{id:"urineModal",class:C(["modal-overlay",{"modal-on":f.value}]),style:j({visibility:f.value?"visible":"hidden"})},[e("div",U,[e("div",{class:"flex justify-end"},[e("button",{onClick:m,class:"text-3xl font-black"},"×")]),O,e("div",B,[e("div",M,[e("h1",V,b(h(s).selectDate),1),e("div",null,[(r(!0),c(_,null,y(h(s).urineData,t=>(r(),c("div",N,[e("span",P,[e("span",null,b(t.label),1),z]),e("span",L,[T(e("input",{type:"number",class:"border-solid border-2 border-[#F5BF76] rounded-md font-medium text-center w-5/6 ml-2",maxlength:"5","onUpdate:modelValue":n=>i[t.name]=n},null,8,A),[[S,i[t.name]]])])]))),256))])]),e("div",{class:"text-right"},[e("button",{class:"mr-2 px-4 py-0.5 font-bold text-s rounded-md border-2 border-black text-black bg-white",onClick:D}," 저장 ")])])])],6),h(s).urineData[0].data!=""?(r(),c("div",G,[e("button",{onClick:a[0]||(a[0]=t=>w()),class:"text-lg font-black"},"×")])):v("",!0),h(s).urineData[0].data!=""?(r(!0),c(_,{key:1},y(h(s).urineData,(t,n)=>(r(),c("div",{class:"flex place-content-between mb-3 items-center",key:t.label},[e("span",J,b(t.label),1),e("span",$,b(t.data),1),e("div",q,[(r(),c(_,null,y(p,l=>e("div",{class:C(k(l,t.class)),key:l.id},null,2)),64)),e("span",{class:C(["w-[40%] font-black text-right text-shadow",p[t.class].textColor])},b(p[t.class].label),3)])]))),128)):v("",!0),e("div",{class:"flex"},[e("button",{class:"m-auto border-solid border-2 border-[#c8c8c8] rounded-md px-6 font-bold",onClick:m}," 데이터 추가 ")])],64))}};export{Q as default};
